---
title: regexper 正则表达式
date: 2019-10-25 15:39:07
description: "正则表达式技巧"
image: "/images/20191023/node.svg"
slug: regexper
---

`https://juejin.im/post/5cdcd42551882568651554e6`正则表达式不要背

## 1、`/a/`单个字符

`/\*/` 星号

`\n` 换行符 `new line`

`\f` 换页符 `form feed`

`\r` 回车符 `return`

`\s` 空白符 `space`

`\t` 制表符 `tab`

`\v` 垂直制表符 `vertical tab`

`[\b]` 回退符 `backspace`

## 2、多个字符

/[123]/ 匹配 1、2、3

/[0-9]/ 匹配所有数字

/[a-z]/匹配所有小写字母

`.` 除了换行符之外的任何字符 | 句号,除了句子结束符

`\d` 单个数字, [0-9] | digit

`\D` 除了[0-9] | not digit

`\w` 包括下划线在内的单个字符，[A-Za-z0-9_] | word

`\W` 非单字字符 | not word

`\s` 匹配空白字符,包括空格、制表符、换页符和换行符 | space

`\S` 匹配非空白字符 | not space

## 3、循环与重复

### `?` `0|1` 0 或 1 个字符

`/colou?r/` 匹配 color 或 colour

### `*` `>=0` 0 或无数个字符

### `+` `>=1` 同个字符 1 次或多次

### `{3,99}` 特定次数

`/a{3}/` a 匹配 3 次

`/a{2,}/` a 匹配至少 2 次

### `{x}` x 次

### `{min,max}` min 到 max 次之间

### `{min,}` 至少 min 次

### `{0,max}` 最多 max 次

| 匹配规则     | 元字符            | 联想方式                                           |
| ------------ | ----------------- | -------------------------------------------------- |
| 0 次或 1 次  | `?`               | 且问,此事有还无                                    |
| 0 次或无数次 | `*`               | 从无到有，最后星宿布满星空                         |
| 1 次或无数次 | `+`               | 一加, +1                                           |
| 特定次数     | `{x}, {min, max}` | 可以想象成一个数轴，从一个点，到一个射线再到线段。 |

## 4、位置边界

### 单词边界

`\b` boundary 边界

`/\bcat\b/` 匹配 cat，不匹配 scattered

### 字符串边界

`/^I am scq000\.$/m` I am scq000

`m` 多行模式 `multiple line` 排除换行符的干扰

`i` 或略大小写 `ignore case, case-insensitive`

`g` 所有匹配 `global`

| 边界和标志 | 正则表达式 | 记忆方式                          |
| ---------- | ---------- | --------------------------------- |
| 单词边界   | `\b`       | `boundary`                        |
| 非单词边界 | `\B`       | `not boundary`                    |
| 字符串开头 | `^`        | 小头尖尖那么大个                  |
| 字符串结尾 | `\$`       | 终结者，美国科幻电影，美元符\$    |
| 多行模式   | `m` 标志   | `multiple of lines`               |
| 忽略大小写 | `i` 标志   | `ignore case`, `case-insensitive` |
| 全局模式   | `g` 标志   | `global`                          |

## 5、回溯引用

`\0` 整个表达式

`\1` 第一个表达式

`\2` 第二个表达式

`Hello what what is the first thing, and I am am Tom.`

`\b(\w+)\s\1` 两个连续相同单词，`\b` 单词边界，`\w` 包括下划线在内的单个字符，`+` 同个字符 1 次或多次，`\s` 空白符

```javascript
var str = "abc abc 123";
// g 全局模式
str.replace(/(ab)c/g, "$1g");
// 得到结果 'abg abg 123'
```

非捕获正则`(?:regex)`

```javascript
var str = "scq000".str.replace(/(scq00)(?:0)/, "$1,$2");
// 返回 scq00, $2
// 由于使用了非捕获正则，所以第二个引用没有值，这里直接替换为$2
```

### 前向查找

`(?=regex)`

`happ(?=ily)` 以 happ 开头

`(?!regex)` 负前向查找

`happ(?!ily)`

### 后向查找

javascript 不支持

`(?<=regex)`

`/(?<=app)ple/` apple people 只想找到 apple 的 ple

`(?<!regex)` 负后向查找 指定的子表达式不能被匹配到 `/(?<!pep)ple/`

```javascript
// 替换apple的ple为ply
var str = "apple people";
// reverse 颠倒
str
  .split("")
  .reverse()
  .join("")
  .replace(/elp(?=pa)/, "ylp")
  .split("")
  .reverse()
  .join("");
```

| 回溯查找   | 正则                    | 记忆方式                                                            |
| ---------- | ----------------------- | ------------------------------------------------------------------- |
| 引用       | \0,\1,\2 和 $0, $1, \$2 | 转义+数字                                                           |
| 非捕获组   | (?:)                    | 引用表达式(()), 本身不被消费(?),引用(:)                             |
| 前向查找   | (?=)                    | 引用子表达式(())，本身不被消费(?), 正向的查找(=)                    |
| 前向负查找 | (?!)                    | 引用子表达式(())，本身不被消费(?), 负向的查找(!)                    |
| 后向查找   | (?<=)                   | 引用子表达式(())，本身不被消费(?), 后向的(<，开口往后)，正的查找(=) |
| 后向负查找 | (?<!)                   | 引用子表达式(())，本身不被消费(?), 后向的(<，开口往后)，负的查找(!) |

### 逻辑处理

`^` 只有在`[`和`]`内部使用的`^`才表示非的关系

| 逻辑关系 | 正则元字符      |
| -------- | --------------- |
| 与       | 无              |
| 非       | `[^regex]`和`!` |
| 或       | `|`             |
